---
title: Today I learned 21.05.14.
tags: TIL git
---





# pjt-boilerplate





# Spring Security

- 시큐리티 테스트 코드 작성 https://catchdream.tistory.com/194



# 더 자바 8

- 함수형



# 읽은 글

- [LINE의 장애 보고와 후속 절차 문화](https://engineering.linecorp.com/ko/blog/line-failure-reporting-and-follow-up-process-culture/)

  - Quote

    >LINE에는 우스갯소리로 ‘병풍친다’라는 말이 있었습니다. 장애가 발생했을 때 담당자의 뒤에 사람들이 우르르 몰려가서 병풍처럼 서서 대응하고 있는 모습을 ‘병풍친다’고 불렀는데요. 그래서 다들 아래처럼 병풍치게 되는 상황을 두려워했습니다.
    >
    >
    >최근에는 그런 모습을 많이 보지 못하게 되었는데요. 어느 정도 프로세스가 정립되고 커뮤니케이션 채널이 안정화되면서 굳이 담당자 뒤에 몰려가서 압박을 주지 않아도 되게 되었기 때문이라고 생각합니다. 🙂 

  - 읽다 보니 생각 난 것

    - 홈페이지 로그인 불가 문제
      - 앱과 웹에서 서로 API를 가져다 쓰는 상황
      - 웹에서 로그인 처리 시에 가져오는 외부 API에 대한 예외처리가 안되어 있었음
      - 앱에 배포된 API에 빠진 클래스가 있어 ClassNotFound가 계속 나고 있었음
      - 배포 직 후 테스트도 없었거니와, 웹과 앱이 각기 담당부서가 달랐기 때문에 서로 확인하지 못한 상황
        - 지금 생각해보면 앱의 새로운 배포시에 웹에서 앱 연동 API를 테스트하는 절차 등이 필요 했었을 것 같음

    - 잦은 장애의 근본적인 이유를 찾지 못하는 경우가 많음. 트래픽이 일시적으로 치솟는 상황들이 있었는데 이유를 알지 못함.

  - 장애처리 프로세스

    1. 장애 탐지
       - 모니터링 도구 : 자동 메일 발송 알람 시스템, 자동 메세지 감시 봇,  임직원 보고용 슬랙 채널, 외부 보고용 CS form
    2. 장애 전파
       - 부서로 내용 전파
       - 봇 프로그램의 경우 장애 범위따라 전파 부서, 채널 선택 및 템플릿 메세지 발송
    3. 장애 해결
       - 빠른 해결을 위한 방식 들
         - 롤백
         - 서버 재기동
         - 장비 증설
           - 혹은 클라우드 서비스의 오토 스케일링 기능 사용
           - [ ] 업, 스
         - 핫픽스 배포
           - 앱의 경우는 기능의 on/off를 서버에서 진행할 수 있도록 하는 것이 좋음 -> 배포 시 시간이 소요가 되므로
    4. 장애 보고
       - 장애 보고를 위한 가이드를 위키 페이지 통해 제공
    5. 장애 회고
       - 장애를 돌아보여 원인 분석 및 향후 대응책 논의
         - 팀내 회고
         - 개발자 회고
       - 자주 등장하는 액션 아이템
         - 사전에 막는 방법
           - 유닛 테스트, 통합 테스트 추가
           - 구조 개선(동기 -> 비동기 등)
           - fast failure를 통해 리소스 낭비 줄임(connection 실패시 빠르게 실패 처리)
         - 탐지 개선 방법
           - 알람 시스템의 항목을 추가
           - 로그 추가
           - 대시보드로 수치 볼 수 있도록
         - 처리 개선 방법
           - 작업의 사전 공유